<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>GNUMP3d [GNU MP3/Media Streamer] - Indexing Your Music - GNU Project - Free Software Foundation (FSF)</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style type="text/css" media="all">@import url(style.css);</style>
</head>
<body>
	<div id="oldbrowser">
		<p>

			This site will look much better in a browser that supports
			<a href="http://www.webstandards.org/upgrade/"
			title="Download a browser that complies with Web standards.">web
			standards</a>, but it is accessible to any browser or Internet
			device.
		</p>
	</div>
	<div id="masthead">
		<p align="center"><img src="gnump3d.jpg">
	</div>
	<div id="pagemenu">
		<div id="menuframe">
<div><a href="index.html">Index</a></div>
<div> <a href="documents.html">Documentation</a> </div>
<div> <a href="lists.html">Mailing Lists</a> </div>
<div> <a href="FAQ.html">FAQ</a> </div>
<div> <a href="download.html">Download</a> </div>
<div> <a href="cvs.html">CVS</a> </div>
<div> <a href="developer.html">Developers</a> </div>
<div> <a href="screenshots.html">Screenshots</a> </div>
<div> <a href="logos.html">Logos</a> </div>
<div> <a href="bugs.html">Bugs</a> </div>
<div> <a href="links.html">Links</a> </div>
<div> <a href="thanks.html">Thanks</a> </div>
<div> <a href="history.html">History</a> </div>
<div> <a href="dedication.html">Dedication</a> </div>
		</div>
	</div>
	<div id="pagebodyframe">

		<div id="pagebody">
<a name="gnump3d-index"><!-- Anchor--></a>

<h3><a name="TOC18">Indexing Your Music</a></h3>

<p>&nbsp;One of the goals of the <a href="version2.html#version2">version 2 rewrite</a> was to investigate ways of speeding up the server, and working with databases.</p>
<p>&nbsp;To that end GNUMP3d v2.5 and higher will no longer directly read the song tags from your audio files upon each directory access, instead song tags are read from a &quot;database file&quot;</p>
<p>&nbsp;When the server starts it will index all the files which are found beneath your defined 'root' directory - writing out the filename and tag informatin from each file it finds.</p>
<p>&nbsp;At any time you may update the database by manually running the installed script 'gnump3d-index', this script may also give you statistics upon your archive if you run with the '--stats' argument:</p>

<pre>
skx@hell:~$ gnump3d-index  --stats
Beneath /home/mp3 there are:
505 audio files - totalling 2GB.
</pre>

<p>&nbsp;The song tag information is then used for searching your archive via the search plugin, and for building up the web interface.</p>
<p>&nbsp;(The database is currently nothing more sophisticated than a flat file which you may view with your favourite text editor if you wish.  It is entirely possible that the information will be <i>optionally</i> stored in a real database in the future.)</p>
<p>&nbsp;To control where the database resides you may specify it's path within the <a href="config.html#Config">gnump3d.conf</a> file - using the setting below:</p>
<pre>
#
#  As a speedup and optimisation song tag is read via a companion script
# which is called 'gnump3d-index'.  This will be run automatically when
# the server starts if possible.
#
#  This next setting controls where that script will write its tag database
# to.
#
tag_cache = /var/cache/gnump3d/song.tags
</pre>
<p>&nbsp;To keep this database up to date when you install the server it is recommended that you add a cron job to re-index your music once a day, or so.  (The <a href="http://www.debian.org/">Debian GNU/Linux</a> package will do this automatically when it is installed).</p>


		</div>
	</div>
	<div id="footer">
		<hr />

		<div id="validxhtml">
			<a href="http://validator.w3.org/check/referer"><img
				src="http://www.w3.org/Icons/valid-xhtml10.png"
				alt="Valid XHTML 1.0!" height="31" width="88" /></a>
		</div>
		<div id="copyright">
			<span id="copyrightprefix">Copyright (c) 2001,2002,2003,2004 <a href="http://www.steve.org.uk/">Steve Kemp</a><spam>
			<p>Verbatim copying and distribution of this entire page is permitted in any medium,<br/> provided this notice is preserved.</p>
			<p>Page Last modified : 14 March 2004
</p>
		</div>

	</div>
</body>
</html>
