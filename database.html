<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
    <meta name="Keywords" content="GNU, MP3, OGG, Streamer, Perl, Free Software, Steve Kemp, skx"/>
    <meta name="Description" content="Indexing Your Music"/>
    <link type="text/css" rel="stylesheet" href="style.css"/>
    <title>GNUMP3d [GNU MP3/Media Streamer] - Indexing Your Music - GNU Project - Free Software Foundation(FSF)</title>
  </head>

  <body>
<div style="text-align: center;" ><p><a href="http://www.gnump3d.org/"><img src="gnump3d.jpg" alt="Logo"/></a></p></div>
    <div class="nav">

	<ul>
<li> <a href="index.html">About GNUMP3d</a> </li>
<li> <a href="documents.html">Documentation</a> </li>
<li> <a href="lists.html">Mailing Lists</a> </li>
<li> <a href="FAQ.html">FAQ</a> </li>
<li> <a href="download.html">Download</a> </li>
<li> <a href="cvs.html">CVS</a> </li>
<li> <a href="developer.html">Developers</a> </li>
<li> <a href="screenshots.html">Screenshots</a> </li>
<li> <a href="logos.html">Logos</a> </li>
<li> <a href="bugs.html">Bugs</a> </li>
<li> <a href="links.html">Links</a> </li>
<li> <a href="thanks.html">Thanks</a> </li>
<li> <a href="history.html">History</a> </li>
<li> <a href="dedication.html">Dedication</a> </li>
	</ul>
    </div>
    <div class="main">
      <div id="content">
<a name="gnump3d-index"><!-- Anchor--></a>

<h3><a name="TOC18">Indexing Your Music</a></h3>

<p>One of the goals of the <a href="version2.html#version2">version 2 rewrite</a> was to investigate ways of speeding up the server, and working with databases.</p>
<p>To that end GNUMP3d v2.5 and higher will no longer directly read the song tags from your audio files upon each directory access, instead song tags are read from a &quot;database file&quot;</p>
<p>When the server starts it will index all the files which are found beneath your defined 'root' directory - writing out the filename and tag informatin from each file it finds.</p>
<p>At any time you may update the database by manually running the installed script 'gnump3d-index', this script may also give you statistics upon your archive if you run with the '--stats' argument:</p>

<pre class="example">
skx@hell:~$ gnump3d-index  --stats
Beneath /home/mp3 there are:
505 audio files - totalling 2GB.
</pre>

<p>The song tag information is then used for searching your archive via the search plugin, and for building up the web interface.</p>
<p>(The database is currently nothing more sophisticated than a flat file which you may view with your favourite text editor if you wish.  It is entirely possible that the information will be <i>optionally</i> stored in a real database in the future.)</p>
<p>To control where the database resides you may specify it's path within the <a href="config.html#Config">gnump3d.conf</a> file - using the setting below:</p>
<pre class="example">
#
#  As a speedup and optimisation song tag is read via a companion script
# which is called 'gnump3d-index'.  This will be run automatically when
# the server starts if possible.
#
#  This next setting controls where that script will write its tag database
# to.
#
tag_cache = /var/cache/gnump3d/song.tags
</pre>
<p>To keep this database up to date when you install the server it is recommended that you add a cron job to re-index your music once a day, or so.  (The <a href="http://www.debian.org/">Debian GNU/Linux</a> package will do this automatically when it is installed).</p>


      </div>
    </div>

    <div class="copyright">
      <p>Last modified: 24 November 2004
 - Copyright (c) 2001,2002,2003,2004 <a href="http://www.steve.org.uk/">Steve Kemp</a> &lt;<a href="http://www.steve.org.uk/contact/">email</a>&gt;.
      </p>
    </div>
  </body>
</html>
