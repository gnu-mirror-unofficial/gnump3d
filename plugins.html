<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
    <meta name="Keywords" content="GNU, MP3, OGG, Streamer, Perl, Free Software, Steve Kemp, skx"/>
    <meta name="Description" content="Plugin Development Notes"/>
    <link type="text/css" rel="stylesheet" href="style.css"/>
    <title>GNUMP3d [GNU MP3/Media Streamer] - Plugin Development Notes - GNU Project - Free Software Foundation(FSF)</title>
  </head>

  <body>
<div style="text-align: center;" ><p><a href="http://www.gnump3d.org/"><img src="gnump3d.jpg" alt="Logo"/></a></p></div>
    <div class="nav">

	<ul>
<li> <a href="index.html">About GNUMP3d</a> </li>
<li> <a href="documents.html">Documentation</a> </li>
<li> <a href="lists.html">Mailing Lists</a> </li>
<li> <a href="FAQ.html">FAQ</a> </li>
<li> <a href="download.html">Download</a> </li>
<li> <a href="cvs.html">CVS</a> </li>
<li> <a href="developer.html">Developers</a> </li>
<li> <a href="screenshots.html">Screenshots</a> </li>
<li> <a href="logos.html">Logos</a> </li>
<li> <a href="bugs.html">Bugs</a> </li>
<li> <a href="links.html">Links</a> </li>
<li> <a href="thanks.html">Thanks</a> </li>
<li> <a href="history.html">History</a> </li>
<li> <a href="dedication.html">Dedication</a> </li>
	</ul>
    </div>
    <div class="main">
      <div id="content">
<a name="Plugins"><!-- Anchor--></a>

<h3><a name="TOC75">Plugin Development Notes.</a></h3>


<h4><a name="TOC76">GNUMP3d Plugin Support</a></h4>
<p>GNUMP3d now has support for external plugins, which are Perl modules loaded upon demand by the server when incoming requests are recieved.</p>
<p>The plugins may extend the server by handling the processing of a given URL.  When an incoming request is made each of the loaded plugins is given the opertunity to handle it, if none does so then the request is handled by the server proper.</p>
<p>Included with each release are several 'core' plugins - these plugins are all considered to be part of the core of the server, because they're linked to from the included templates.  However if you wish to remove them you're entirely welcome to do so.</p>
<p>Core plugins include:</p>
<ul>
<li>A plugin which handles the server statistics: '/stats/'</li>
<li>A plugin which will display the last 20 tracks served '/last/'.</li>
<li>A plugin for searching your archive for music '/search/'.</li>
</ul>


<h4><a name="TOC77">How it all works</a></h4>
<p>Currently the plugin system is rather simplistic, it assumes that the name of a plugin matches the path upon the server which it handles.</p>
<p>For example a plugin to handle the path "/stats/" must be called "stats.pm".</p>
<p>This will change in the near future - although I will ensure that all user contributed plugins are updated to work with the new system when it is ready.</p>

<h4><a name="TOC78">Creating A Plugin</a></h4>
<p>This is the simple overview for creating a plugin, there's a more
 detailed <a href="ptutorial.html#plugin-tutorial">plugin creation tutorial</a> if you'd
 like step by step instructions.</p>
<p>In brief a plugin is a  Perl Module which lives in the 'lib/gnump3d/pluguins/' directory.  (Note that the plugin directory can be changed from the configuration file, or the command line).</p>
<p>To add a new plugin simply create the file 'lib/gnump3d/plugins/foo.pm', making sure that you include the required functions.</p>

<p>Your plugin will be called once for each incoming request
 which matches the path it handles, where it will be assumed that the request was handled..</p>
<p>Have a look at the source to the included plugins for more details,
 '<a href="http://savannah.gnu.org/cgi-bin/viewcvs/*checkout*/gnump3d/gnump3d/lib/gnump3d/plugins/COPYING.pm?rev=HEAD">COPYING.pm</a>' is the simplest plugin, (it just displays the GNU General Public License, regardless of how it was called).</p>

<h4><a name="TOC79">Todo</a></h4>
<p>1. I need to plan plugin priorities.  What should happen if multiple
 plugins all claim a given path?</p>
<p>2. Could plugins be called for more than just regexps on the request path?</p>


      </div>
    </div>

    <div class="copyright">
      <p>Last modified: 10 September 2005
 - Copyright (c) 2001,2002,2003,2004,2005 <a href="http://www.steve.org.uk/">Steve Kemp</a> &lt;<a href="http://www.steve.org.uk/contact/">email</a>&gt;.
      </p>
    </div>
  </body>
</html>
